{"uid":"ffdfd07de075e714","name":"Receive Product from order","fullName":"orders/ordersReceive.spec.ts:21:2","historyId":"ef6a8b6718041bef24c6c34db2666b43:78901c67ca17a06e7006c214800124e6","time":{"start":1767452726068,"stop":1767452736256,"duration":10188},"status":"failed","statusMessage":"TypeError: Cannot read properties of undefined (reading '_id')","statusTrace":"TypeError: Cannot read properties of undefined (reading '_id')\n    at OrdersApiService.collectIdsForDeletion (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:262:29)\n    at OrdersApiService.createDraft (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:57:8)\n    at OrdersApiService.createDraftWithDelivery (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:70:17)\n    at OrdersApiService.processOrder (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:116:17)\n    at /__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/tests/api/orders/ordersReceive.spec.ts:25:27","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"TypeError: Cannot read properties of undefined (reading '_id')","statusTrace":"TypeError: Cannot read properties of undefined (reading '_id')\n    at OrdersApiService.collectIdsForDeletion (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:262:29)\n    at OrdersApiService.createDraft (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:57:8)\n    at OrdersApiService.createDraftWithDelivery (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:70:17)\n    at OrdersApiService.processOrder (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:116:17)\n    at /__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/tests/api/orders/ordersReceive.spec.ts:25:27","steps":[{"name":"Before Hooks","time":{"start":1767452726068,"stop":1767452726262,"duration":194},"status":"passed","steps":[{"name":"beforeAll hook","time":{"start":1767452726069,"stop":1767452726255,"duration":186},"status":"passed","steps":[{"name":"Fixture \"request\"","time":{"start":1767452726072,"stop":1767452726073,"duration":1},"status":"passed","steps":[{"name":"Create request context","time":{"start":1767452726073,"stop":1767452726073,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"loginApi\"","time":{"start":1767452726073,"stop":1767452726073,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApiService\"","time":{"start":1767452726074,"stop":1767452726074,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Request POST /api/login","time":{"start":1767452726074,"stop":1767452726245,"duration":171},"status":"passed","steps":[{"name":"post \"/api/login\"","time":{"start":1767452726075,"stop":1767452726244,"duration":169},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 200","time":{"start":1767452726245,"stop":1767452726246,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1767452726246,"stop":1767452726246,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1767452726247,"stop":1767452726247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1767452726248,"stop":1767452726248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApiService\"","time":{"start":1767452726248,"stop":1767452726248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApi\"","time":{"start":1767452726248,"stop":1767452726248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1767452726248,"stop":1767452726249,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":13,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1767452726260,"stop":1767452726261,"duration":1},"status":"passed","steps":[{"name":"Create request context","time":{"start":1767452726260,"stop":1767452726260,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"ordersApi\"","time":{"start":1767452726261,"stop":1767452726261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApi\"","time":{"start":1767452726261,"stop":1767452726261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApiService\"","time":{"start":1767452726261,"stop":1767452726261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApi\"","time":{"start":1767452726262,"stop":1767452726262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApiService\"","time":{"start":1767452726262,"stop":1767452726262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"ordersApiService\"","time":{"start":1767452726262,"stop":1767452726262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":22,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/customers","time":{"start":1767452726265,"stop":1767452730691,"duration":4426},"status":"passed","steps":[{"name":"post \"/api/customers\"","time":{"start":1767452726267,"stop":1767452730690,"duration":4423},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 201","time":{"start":1767452730692,"stop":1767452730692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1767452730693,"stop":1767452730693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1767452730693,"stop":1767452730694,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Response body should match JSON schema","time":{"start":1767452730694,"stop":1767452730694,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Create product via API","time":{"start":1767452730695,"stop":1767452736295,"duration":5600},"status":"passed","steps":[{"name":"POST /api/products","time":{"start":1767452730697,"stop":1767452736288,"duration":5591},"status":"passed","steps":[{"name":"Request POST /api/products","time":{"start":1767452730698,"stop":1767452736288,"duration":5590},"status":"passed","steps":[{"name":"post \"/api/products\"","time":{"start":1767452730699,"stop":1767452736287,"duration":5588},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 201","time":{"start":1767452736289,"stop":1767452736290,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1767452736290,"stop":1767452736291,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1767452736292,"stop":1767452736292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Response body should match JSON schema","time":{"start":1767452736294,"stop":1767452736295,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/orders","time":{"start":1767452736298,"stop":1767452736446,"duration":148},"status":"passed","steps":[{"name":"post \"/api/orders\"","time":{"start":1767452736300,"stop":1767452736445,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/login","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"498eae702c7bd0a9","name":"Request POST /api/login","source":"498eae702c7bd0a9.json","type":"application/json","size":143}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 200 POST /api/login","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"e46c3157cf415d32","name":"Response 200 POST /api/login","source":"e46c3157cf415d32.json","type":"application/json","size":992}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/customers","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"3f684fb0d109945","name":"Request POST /api/customers","source":"3f684fb0d109945.json","type":"application/json","size":778}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 201 POST /api/customers","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"8f06a09491417cb6","name":"Response 201 POST /api/customers","source":"8f06a09491417cb6.json","type":"application/json","size":1106}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/products","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"b7d26c14505a3af6","name":"Request POST /api/products","source":"b7d26c14505a3af6.json","type":"application/json","size":664}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 201 POST /api/products","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"c7d77469c610f15a","name":"Response 201 POST /api/products","source":"c7d77469c610f15a.json","type":"application/json","size":983}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/orders","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"7d9be62c78d975e9","name":"Request POST /api/orders","source":"7d9be62c78d975e9.json","type":"application/json","size":404}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 404 POST /api/orders","time":{"start":1767452736461,"stop":1767452736461,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"eb7c8414a3a02882","name":"Response 404 POST /api/orders","source":"eb7c8414a3a02882.json","type":"application/json","size":553}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"After Hooks","time":{"start":1767452736447,"stop":1767452736456,"duration":9},"status":"passed","steps":[{"name":"afterEach hook","time":{"start":1767452736447,"stop":1767452736447,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"ordersApiService\"","time":{"start":1767452736448,"stop":1767452736448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApiService\"","time":{"start":1767452736448,"stop":1767452736448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApi\"","time":{"start":1767452736448,"stop":1767452736448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApiService\"","time":{"start":1767452736449,"stop":1767452736449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApi\"","time":{"start":1767452736449,"stop":1767452736449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"ordersApi\"","time":{"start":1767452736449,"stop":1767452736449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1767452736449,"stop":1767452736450,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"af8ebb65e4e321a5","name":"stdout","source":"af8ebb65e4e321a5.txt","type":"text/plain","size":78}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":56,"attachmentsCount":9,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"language","value":"javascript"},{"name":"framework","value":"playwright"},{"name":"package","value":"orders.ordersReceive.spec.ts"},{"name":"titlePath","value":" > sales-portal-api > api/orders/ordersReceive.spec.ts > [API] [Sales Portal] [Products]"},{"name":"tag","value":"order"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"host","value":"3aa1f58e685f"},{"name":"thread","value":"pid-1651-worker-3"},{"name":"parentSuite","value":"sales-portal-api"},{"name":"subSuite","value":"[API] [Sales Portal] [Products]"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Project","value":"sales-portal-api"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["regression","smoke","order"]},"source":"ffdfd07de075e714.json","parameterValues":["sales-portal-api"]}