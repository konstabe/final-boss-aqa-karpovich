{"uid":"a18d84f038f4e644","name":"Receive Products from order without token","fullName":"orders/ordersReceive.spec.ts:63:6","historyId":"a4ccce1ebc455bc393a5da32a200300e:78901c67ca17a06e7006c214800124e6","time":{"start":1765828842303,"stop":1765828850259,"duration":7956},"status":"failed","statusMessage":"TypeError: Cannot read properties of null (reading '_id')","statusTrace":"TypeError: Cannot read properties of null (reading '_id')\n    at OrdersApiService.collectIdsForDeletion (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:239:41)\n    at OrdersApiService.createDraft (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:50:8)\n    at OrdersApiService.createDraftWithDelivery (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:63:17)\n    at OrdersApiService.processOrder (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:92:17)\n    at /__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/tests/api/orders/ordersReceive.spec.ts:67:27","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"TypeError: Cannot read properties of null (reading '_id')","statusTrace":"TypeError: Cannot read properties of null (reading '_id')\n    at OrdersApiService.collectIdsForDeletion (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:239:41)\n    at OrdersApiService.createDraft (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:50:8)\n    at OrdersApiService.createDraftWithDelivery (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:63:17)\n    at OrdersApiService.processOrder (/__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/api/services/orders.service.ts:92:17)\n    at /__w/final-boss-aqa-karpovich/final-boss-aqa-karpovich/src/tests/api/orders/ordersReceive.spec.ts:67:27","steps":[{"name":"Before Hooks","time":{"start":1765828842329,"stop":1765828843250,"duration":921},"status":"passed","steps":[{"name":"beforeAll hook","time":{"start":1765828842330,"stop":1765828843235,"duration":905},"status":"passed","steps":[{"name":"Fixture \"request\"","time":{"start":1765828842345,"stop":1765828842356,"duration":11},"status":"passed","steps":[{"name":"Create request context","time":{"start":1765828842348,"stop":1765828842352,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"loginApi\"","time":{"start":1765828842357,"stop":1765828842357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApiService\"","time":{"start":1765828842357,"stop":1765828842358,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Request POST /api/login","time":{"start":1765828842359,"stop":1765828843198,"duration":839},"status":"passed","steps":[{"name":"post \"/api/login\"","time":{"start":1765828842363,"stop":1765828843196,"duration":833},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 200","time":{"start":1765828843200,"stop":1765828843200,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1765828843201,"stop":1765828843201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1765828843202,"stop":1765828843202,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1765828843203,"stop":1765828843203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApiService\"","time":{"start":1765828843204,"stop":1765828843204,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"loginApi\"","time":{"start":1765828843204,"stop":1765828843204,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1765828843204,"stop":1765828843223,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":13,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1765828843243,"stop":1765828843246,"duration":3},"status":"passed","steps":[{"name":"Create request context","time":{"start":1765828843244,"stop":1765828843245,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"ordersApi\"","time":{"start":1765828843247,"stop":1765828843247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApi\"","time":{"start":1765828843247,"stop":1765828843247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApiService\"","time":{"start":1765828843248,"stop":1765828843248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApi\"","time":{"start":1765828843248,"stop":1765828843249,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApiService\"","time":{"start":1765828843249,"stop":1765828843249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"ordersApiService\"","time":{"start":1765828843249,"stop":1765828843250,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":22,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/customers","time":{"start":1765828843257,"stop":1765828849143,"duration":5886},"status":"passed","steps":[{"name":"post \"/api/customers\"","time":{"start":1765828843259,"stop":1765828849142,"duration":5883},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 201","time":{"start":1765828849144,"stop":1765828849144,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1765828849145,"stop":1765828849145,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1765828849146,"stop":1765828849147,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Response body should match JSON schema","time":{"start":1765828849164,"stop":1765828849164,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Create product via API","time":{"start":1765828849165,"stop":1765828849373,"duration":208},"status":"passed","steps":[{"name":"POST /api/products","time":{"start":1765828849168,"stop":1765828849368,"duration":200},"status":"passed","steps":[{"name":"Request POST /api/products","time":{"start":1765828849171,"stop":1765828849368,"duration":197},"status":"passed","steps":[{"name":"post \"/api/products\"","time":{"start":1765828849174,"stop":1765828849367,"duration":193},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 201","time":{"start":1765828849369,"stop":1765828849372,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"IsSuccess should be true","time":{"start":1765828849370,"stop":1765828849372,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ErrorMessage should be null","time":{"start":1765828849371,"stop":1765828849372,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Response body should match JSON schema","time":{"start":1765828849373,"stop":1765828849374,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/orders","time":{"start":1765828849375,"stop":1765828850286,"duration":911},"status":"passed","steps":[{"name":"post \"/api/orders\"","time":{"start":1765828849376,"stop":1765828850284,"duration":908},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Request POST /api/login","time":{"start":1765828851299,"stop":1765828851299,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"fa1890c423ffad7e","name":"Request POST /api/login","source":"fa1890c423ffad7e.json","type":"application/json","size":143}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 200 POST /api/login","time":{"start":1765828851299,"stop":1765828851299,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"bb6b69ea1d3c5b96","name":"Response 200 POST /api/login","source":"bb6b69ea1d3c5b96.json","type":"application/json","size":993}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/customers","time":{"start":1765828851299,"stop":1765828851299,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"17adbf2bda748921","name":"Request POST /api/customers","source":"17adbf2bda748921.json","type":"application/json","size":779}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 201 POST /api/customers","time":{"start":1765828851299,"stop":1765828851299,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"7a8dc0049706239e","name":"Response 201 POST /api/customers","source":"7a8dc0049706239e.json","type":"application/json","size":1107}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/products","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"1083ccdf72f45b76","name":"Request POST /api/products","source":"1083ccdf72f45b76.json","type":"application/json","size":664}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 201 POST /api/products","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"d729d4dcf1549265","name":"Response 201 POST /api/products","source":"d729d4dcf1549265.json","type":"application/json","size":983}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request POST /api/orders","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"64891533896be04f","name":"Request POST /api/orders","source":"64891533896be04f.json","type":"application/json","size":404}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 201 POST /api/orders","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"2b8183e1dd350dd4","name":"Response 201 POST /api/orders","source":"2b8183e1dd350dd4.json","type":"application/json","size":2455}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Request DELETE /api/orders/694068f21c508c5d5eca6d1d","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"d71179f413696c92","name":"Request DELETE /api/orders/694068f21c508c5d5eca6d1d","source":"d71179f413696c92.json","type":"application/json","size":286}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"Response 204 DELETE /api/orders/694068f21c508c5d5eca6d1d","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"51c3e0476cfc9f0f","name":"Response 204 DELETE /api/orders/694068f21c508c5d5eca6d1d","source":"51c3e0476cfc9f0f.json","type":"application/json","size":365}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"trace","time":{"start":1765828851300,"stop":1765828851300,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"a05d8b3eb5582470","name":"trace","source":"a05d8b3eb5582470.zip","type":"application/vnd.allure.playwright-trace","size":35981}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":true},{"name":"After Hooks","time":{"start":1765828850287,"stop":1765828851211,"duration":924},"status":"passed","steps":[{"name":"afterEach hook","time":{"start":1765828850288,"stop":1765828851169,"duration":881},"status":"passed","steps":[{"name":"Request DELETE /api/orders/694068f21c508c5d5eca6d1d","time":{"start":1765828850292,"stop":1765828851167,"duration":875},"status":"passed","steps":[{"name":"delete \"/api/orders/694068f21c508c5d5eca6d1d\"","time":{"start":1765828850295,"stop":1765828851166,"duration":871},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code should be 204","time":{"start":1765828851169,"stop":1765828851169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"ordersApiService\"","time":{"start":1765828851170,"stop":1765828851170,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApiService\"","time":{"start":1765828851171,"stop":1765828851171,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"productsApi\"","time":{"start":1765828851172,"stop":1765828851172,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApiService\"","time":{"start":1765828851172,"stop":1765828851172,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"customersApi\"","time":{"start":1765828851172,"stop":1765828851172,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"ordersApi\"","time":{"start":1765828851173,"stop":1765828851173,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"request\"","time":{"start":1765828851173,"stop":1765828851206,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":11,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"87c9e238313a9cf2","name":"stdout","source":"87c9e238313a9cf2.txt","type":"text/plain","size":78}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":62,"attachmentsCount":12,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"language","value":"javascript"},{"name":"framework","value":"playwright"},{"name":"package","value":"orders.ordersReceive.spec.ts"},{"name":"titlePath","value":" > sales-portal-api > api/orders/ordersReceive.spec.ts > [API] [Sales Portal] [Products]"},{"name":"tag","value":"orders"},{"name":"tag","value":"regression"},{"name":"tag","value":"negative"},{"name":"host","value":"09b63e49c1ce"},{"name":"thread","value":"pid-1097-worker-4"},{"name":"parentSuite","value":"sales-portal-api"},{"name":"subSuite","value":"[API] [Sales Portal] [Products]"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Project","value":"sales-portal-api"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"908861fb2719edfd","status":"failed","statusDetails":"Error: Response body should match JSON schema\n\nexpect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","time":{"start":1765828833394,"stop":1765828840502,"duration":7108}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["negative","regression","orders"]},"source":"a18d84f038f4e644.json","parameterValues":["sales-portal-api"]}